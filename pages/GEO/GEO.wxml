<!--pages/GEO/GEO.wxml-->
<view class="container">
  <!-- è¿æ¥çŠ¶æ€ -->
  <view class="status-section">
    <text class="status-label">è¿æ¥çŠ¶æ€:</text>
    <text class="status-value {{isConnected ? 'connected' : 'disconnected'}}">
      {{isConnected ? 'å·²è¿æ¥' : 'æœªè¿æ¥'}}
    </text>
  </view>
  
  <!-- å·¥ä½œæµ -->
  <view class="input-section">
    <text class="label">å·¥ä½œæµ:</text>
    <input 
      class="input" 
      placeholder="å·¥ä½œæµID" 
      value="{{workflow_id}}" 
      bindinput="onIDChange"
    />
  </view>
  
  <!-- æ§åˆ¶æŒ‰é’® -->
  <view class="button-section">
    <button class="btn connect-btn" bindtap="connectWebSocket" type="primary" hidden>
      è¿æ¥
    </button>
    <button class="btn disconnect-btn" bindtap="disconnectWebSocket" hidden>
      æ–­å¼€
    </button>
    <button class="btn clear-btn" bindtap="clearLog">
      æ¸…ç©ºæ—¥å¿—
    </button>
  </view>
  
  <!-- æ¶ˆæ¯å‘é€ -->
  <view class="input-section">
    <text class="label">å‘é€æ¶ˆæ¯:</text>
    <input 
      class="input" 
      placeholder="è¾“å…¥æŸ¥è¯¢å†…å®¹" 
      value="{{message}}" 
      bindinput="onMessageChange"
    />
    <button class="send-btn" bindtap="sendMessage" size="mini">
      å‘é€
    </button>
  </view>
  
  <!-- æ—¥å¿—æ˜¾ç¤º -->
  <view class="log-section" hidden>
    <text class="label">é€šä¿¡æ—¥å¿—:</text>
    <scroll-view class="log-container" scroll-y>
      <view class="log-item {{item.type}}" wx:for="{{logs}}" wx:key="index">
        <text class="log-time">{{item.time}}</text>
        <text class="log-content">{{item.content}}</text>
      </view>
    </scroll-view>
  </view>
  
  <!-- æ¥æ”¶åˆ°çš„æ•°æ® -->
  <view class="data-section">
    <text class="label">æ™ºèƒ½ä½“å›å¤:</text>
    <view class="ai-reply-wrapper">
      <view class="thinking-container" >
        
        <text class="thinking-content" wx:if="{{isexpanded}}">
        {{thinkingdata}}
        </text>
        <text bindtap="changeisexpanded" wx:if="{{isexpanded}}">
        ğŸ‘‰ç‚¹å‡»æŠ˜å æ€è€ƒè¿‡ç¨‹</text>
        <view class="thinking-content" bindtap="changeisexpanded" wx:if="{{!isexpanded}}">
          <text>ğŸ‘‰ ç‚¹å‡»å±•å¼€æ€è€ƒè¿‡ç¨‹</text>
        </view>
      </view>

      <view class="data-container">
        <text class="data-content">{{resultdata}}</text>
      </view>
    </view>

  </view>
</view>